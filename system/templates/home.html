<!DOCTYPE html>
<html lang="en">
  <head>
    <title>{{TITLE}}</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/static/css/style.css">

  </head>
  <body>

  <div class="container">
    
    <div class="row">
      <div class="col-md-12">
        <img class="pull-left logo" src="/static/img/logo.png">
        <div class="pull-left"> 
          <h3>{{TITLE}}</h3>
          <h4>Logged in as {{USER}}</h4>
         </div> 
      </div>
    </div>

    <div class="row">
      <div class="col-md-12">
        <img id="video" src="{{CAMERA_URL}}">
      </div>
    </div>

      <!--<div class="col-md-4">
        <form id="camera-control">
          <input type="button" value="Fullscreen" class="btn btn-primary btn-sm camera-control" data-command="fullscreen">
          <input type="button" value="Take picture" class="btn btn-primary btn-sm drone-control" data-command="picture">
          <input type="button" value="Camera settings..." class="btn btn-primary btn-sm camera-control" data-command="settings">
        </form>
      </div>-->

    <div class="row">

    <div class="col-md-12 controls">

      <form id="drone-control">

      <div id="view-controls" class="col-md-4">
        <table>
          <tr>
            <th colspan="3">View</th>
          </tr>
          <tr>
            <td></td>
            <td>
              <button type="button" class="btn btn-primary btn-sm drone-control" data-command="up" data-keys="ArrowUp,Numpad8">
                 <span class="glyphicon glyphicon-arrow-up"></span>
              </button>
            </td>
            <td></td>
          </tr>
          <tr>
            <td>
              <button type="button" class="btn btn-primary btn-sm drone-control" data-command="left" data-keys="ArrowLeft,Numpad4">
                <span class="glyphicon glyphicon-arrow-left"></span>
              </button>
            </td>
            <td>
              <button type="button" class="btn btn-success btn-sm drone-control" data-command="center" data-keys="Numpad5,c,C">
                <span class="glyphicon glyphicon-record"></span>
              </button>
            </td>
            <td>
              <button type="button" class="btn btn-primary btn-sm drone-control" data-command="right" data-keys="ArrowRight,Numpad6">
                <span class="glyphicon glyphicon-arrow-right"></span>
              </button>
            </td>
          </tr>
          <tr>
            <td></td>
            <td>
              <button type="button" class="btn btn-primary btn-sm drone-control" data-command="down" data-keys="ArrowDown,Numpad2">
                <span class="glyphicon glyphicon-arrow-down"></span>
              </button>
            </td>
            <td></td>
          </tr>
          <tr>
            <td colspan="3">
              <button type="button" class="btn btn-warning btn-sm drone-control" 
              data-command="switch" 
              data-pin="19" 
              data-keys="l,L">
                <span class="glyphicon glyphicon-lamp"></span>
              </button>
              <button type="button" class="btn btn-info btn-sm drone-control" 
              data-command="switch" 
              data-pin="26" 
              data-keys="m,M">
                <span class="glyphicon glyphicon-lamp"></span>
              </button>
            </td>
            <td></td>
          </tr>
        </table>
      </div>

      {{#IS_OPERATOR}}
      <div id="motion-controls" class="col-md-4">
        <table>
          <tr>
            <th colspan="3">Motion</th>
          </tr>
          <tr>
            <td>
              <button type="button" class="btn btn-success btn-sm drone-control" data-command="forward" title="Go back" data-keys="b,B">
                <span class="glyphicon glyphicon-triangle-left"></span>
              </button>
            </td>
            <td>
              <button type="button" class="btn btn-success btn-sm drone-control" data-command="back" title="Go forward" data-keys="f,F">
                <span class="glyphicon glyphicon-triangle-right"></span>
              </button>
            </td>
            <td><input type="button" value="STOP" class="btn btn-danger btn-sm drone-control" data-command="stop" data-keys="s,S"></td>
          </tr>
          <tr>
            <td>
              <button type="button" class="btn btn-default btn-sm drone-control" data-command="slowdown" title="Slow down" data-keys="-">
                <span class="glyphicon glyphicon-minus"></span>
              </button>
            </td>
            <td>
              <button type="button" class="btn btn-default btn-sm drone-control" data-command="speedup" title="Speed up" data-keys="+">
                <span class="glyphicon glyphicon-plus"></span>
              </button>
            </td>
            <td></td>
          </tr>
        </table>
      </div>
      {{/IS_OPERATOR}}

      <div id="diagnostic" class="col-md-4">
        <table class="table table-hover">
          <tr>
            <th colspan="2">Diagnostic <button type="button" class="btn btn-success btn-sm drone-control pull-right" data-callback="update_sensors" title="Refresh" data-keys="R,r">
                <span class="glyphicon glyphicon-refresh"></span>
              </button></th>
          </tr>
          <tr>
            <td><b>CPU temp</b></td>
            <td class="diagnostic" data-sensor-id="cpu_temp">N/A</td>
          </tr>  
          <tr>
            <td><b>Under voltage</b></td>
            <td class="diagnostic" data-sensor-id="under_voltage">N/A</td>
          </tr>  
          <tr>
            <td><b>Battery 1</b></td>
            <td class="diagnostic" data-sensor-id="battery_1">N/A</td>
          </tr>  
          <tr>
            <td><b>Battery 2</b></td>
            <td class="diagnostic" data-sensor-id="battery_2">N/A</td>
          </tr>  
          <tr>
            <td><b>Battery 3</b></td>
            <td class="diagnostic" data-sensor-id="battery_3">N/A</td>
          </tr>  
        </table>
      </div>


      </form>

     </div>
    </div>


    {{#IS_ADMIN}}
    <div class="row">
      <div class="col-md-3">
        <a href="/config">Configuration...</a>
        <form>
        <label for="show-pwm"> <input type="checkbox" id="show-pwm"> Show PWM status</label>
        </form>
      </div>
    </div>

    <div class="row">
      <div class="col-md-3" id="pwm-status">

        <div>

          <div class="pull-left">
            <div id="pwm-0">PWM #0: <span>{{PWM.0}}</span></div>
            <div id="pwm-1">PWM #1: <span>{{PWM.1}}</span></div>
            <div id="pwm-2">PWM #2: <span>{{PWM.2}}</span></div>
            <div id="pwm-3">PWM #3: <span>{{PWM.3}}</span></div>
            <div id="pwm-4">PWM #4: <span>{{PWM.4}}</span></div>
            <div id="pwm-5">PWM #5: <span>{{PWM.5}}</span></div>
            <div id="pwm-6">PWM #6: <span>{{PWM.6}}</span></div>
            <div id="pwm-7">PWM #7: <span>{{PWM.7}}</span></div>
          </div>
         

          <div class="pull-right">
            <div id="pwm-8">PWM #8: <span>{{PWM.8}}</span></div>
            <div id="pwm-9">PWM #9: <span>{{PWM.9}}</span></div>
            <div id="pwm-10">PWM #10: <span>{{PWM.10}}</span></div>
            <div id="pwm-11">PWM #11: <span>{{PWM.11}}</span></div>
            <div id="pwm-12">PWM #12: <span>{{PWM.12}}</span></div>
            <div id="pwm-13">PWM #13: <span>{{PWM.13}}</span></div>
            <div id="pwm-14">PWM #14: <span>{{PWM.14}}</span></div>
            <div id="pwm-15">PWM #15: <span>{{PWM.15}}</span></div>
          </div>

        </div>
      </div>
    </div>
    {{/IS_ADMIN}}

    <div class="row"></div>

  </div>

  <script src="/static/js/jquery-3.2.1.min.js"></script>
  <script src="/static/js/bootstrap.min.js"></script>
  <script src="/static/js/xtcd.js"></script>
  <script src="/static/js/app.js"></script>

  </body>
</html>
